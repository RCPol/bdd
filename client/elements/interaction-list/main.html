<script src="/bower_components/webcomponentsjs/webcomponents-lite.js"></script>
<link rel="import" href="/bower_components/polymer/polymer.html">
<!--<link rel="stylesheet" href="/ffub/DQProfile/main.scss">-->

<dom-module id="interaction-list">  
  <template>       
      <!-- Título da Página -->
    <h1 class="pal"><span id="rcpol-InteractionLabel-flowerVisitors">Visitantes florais de</span> <i>{{plant}}</i></h1>

    <!-- Início: Imagens de Abelhas -->
    <div class="cspm">
    <template is="dom-repeat" items="{{interactions}}">
            <!-- Início: Espécie de visitante -->
            <div class="visitante">

                <!-- Imagem do visitante -->
                <img src="{{item.image}}" class="visit-img">
                    
                <p class="div-visitante">

                <!-- Link para Página com os gráficos -->
                <a href="/interaction-profile/{{item.pollinator}}">

                <!-- Nome da Espécie -->
                <i>{{item.pollinator}}</i> Determinador da Espécie

                </a></p>

                <!-- Tipo da visita registrada -->
                <p class="legenda-int-p">Tipo de visita registrada: Pilhador, Polinizador, Visitante </p>

                <p class="div-visitante">

                <!-- Mouse over como no glossário, mostrando a referência bibliográfica do tipo de interação -->
                <img src="/img/eco_ref.png" title="teste" class="popsref">

                <!-- Mouse over como no glossário, mostrando o crédito da imagem da abelha -->
                <img src="/img/eco_copyr.png" title="teste" class="popsref">
                </p>
                    
            </div>
            <!-- Final: Espécie de visitante -->        
    </template>    
    </div>
  </template>
</dom-module>
<script>
  Polymer({
    is: "interaction-list",    
    properties:{    
        plant: String,    
        interactions: Array
    },
    ready: function(){        
        var self = this;        
        self.load();
    },
    load: function(){   
        var self = this;        
        $.getJSON( "/api/Interactions/pollinators?plant="+self.plant, function( data ) {                             
            self.interactions = data.response;
            self.interactions = self.interactions.map(function(item){                
                item.image = item.image?item.image.resized:"/img/filler-200px.png";
                return item;
            });            
        });
    }    
  });

</script>